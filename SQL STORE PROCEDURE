ALTER PROCEDURE [dbo].[SP_WEB_USER_FORM]
	@ACTION VARCHAR(50)='',
	@USERID INT=0,
	@USERNAME VARCHAR(50)='',
	@EMAIL VARCHAR(50)='',
	@PASSWORD VARCHAR(20)='',
	@MSG VARCHAR(MAX)='' OUTPUT
AS
BEGIN
	SET NOCOUNT ON;
	IF(@ACTION='INSERT')
		BEGIN
			BEGIN TRY 
				INSERT INTO [dbo].[PRIYAL_DB](USERNAME, EMAIL, [PASSWORD])
				VALUES(@USERNAME,@EMAIL,@PASSWORD)
				SET @MSG='y';
				print @MSG
			END TRY 
			BEGIN CATCH
				SET @MSG=ERROR_MESSAGE();
				print @MSG
			END CATCH
		END
	ELSE
		IF(@ACTION='SELALL')
			BEGIN
				SELECT * FROM [dbo].[PRIYAL_DB] ORDER BY USERNAME
			END
	ELSE
		IF(@ACTION='SEL')
			BEGIN
				SELECT * FROM [dbo].[PRIYAL_DB] WHERE ID=@USERID ORDER BY USERNAME
			END
	ELSE
		IF(@ACTION='UPDATE')
			BEGIN
				BEGIN TRY
					UPDATE [dbo].[PRIYAL_DB] SET USERNAME=@USERNAME , EMAIL=@EMAIL,[PASSWORD]= @PASSWORD WHERE ID=@USERID
					SET @MSG='y';
				END TRY
				BEGIN CATCH
				SET @MSG=ERROR_MESSAGE();
				print @MSG
			END CATCH
			END
	ELSE
		IF(@ACTION='DELETE')
			BEGIN
				BEGIN TRY
					DELETE FROM [dbo].[PRIYAL_DB] WHERE ID=@USERID
					SET @MSG='y';
				END TRY
				BEGIN CATCH
					SET @MSG=ERROR_MESSAGE();
					print @MSG
				END CATCH
			END
END
